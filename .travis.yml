language: node_js

os:
  - linux
  - osx

node_js:
  - 'node'
  - 'lts/*'

sudo: false

before_script:
  - npm install -g typescript jest rollup

script:
  - npm install
  - npm run build
  - npm run test
  - cd test
  - npm install
  - npm run test
  - cd ../nodetest
  - npm install
  - tsc
  - node index.js
  - cd ../reacttest
  - npm install
  - npm run build

cache:
  directories:
   - "node_modules"

git:
  depth: 1